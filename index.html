<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kick It California - Savings Calculator</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- html2canvas for card capture -->
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        h1, h2, h3, .brand-font { font-family: 'Space Grotesk', sans-serif; }
        
        /* Custom Animations */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        .animate-float { animation: float 6s ease-in-out infinite; }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px currentColor; }
            50% { box-shadow: 0 0 40px currentColor; }
        }
        
        @keyframes grain {
            0%, 100% { transform: translate(0, 0); }
            10% { transform: translate(-5%, -5%); }
            20% { transform: translate(-10%, 5%); }
            30% { transform: translate(5%, -10%); }
            40% { transform: translate(-5%, 15%); }
            50% { transform: translate(-10%, 5%); }
            60% { transform: translate(15%, 0); }
            70% { transform: translate(0, 10%); }
            80% { transform: translate(-15%, 0); }
            90% { transform: translate(10%, 5%); }
        }
        
        /* Texture overlays */
        .texture-overlay::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(255,255,255,.03) 2px, rgba(255,255,255,.03) 4px),
                repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(255,255,255,.03) 2px, rgba(255,255,255,.03) 4px);
            pointer-events: none;
            z-index: 1;
        }
        
        .grain::after {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            right: -50%;
            bottom: -50%;
            width: 200%;
            height: 200%;
            background: url('data:image/svg+xml;utf8,<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noiseFilter)" opacity="0.05"/></svg>');
            opacity: 0.4;
            pointer-events: none;
            animation: grain 8s steps(10) infinite;
            z-index: 0;
        }
        
        /* Theme Gradients - More vibrant */
        .theme-teen { 
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
            color: #4ade80;
        }
        .theme-adult { 
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 50%, #dbeafe 100%);
            color: #1e40af;
        }
        .theme-senior { 
            background: linear-gradient(135deg, #1e293b 0%, #334155 50%, #1e293b 100%);
            color: #fbbf24;
        }

        .card-teen { 
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
            border: 3px solid #4ade80;
            box-shadow: 0 0 30px rgba(74, 222, 128, 0.3), inset 0 0 60px rgba(74, 222, 128, 0.05);
        }
        .card-adult { 
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%);
            border: 2px solid #3b82f6;
            box-shadow: 0 20px 50px rgba(59, 130, 246, 0.2), inset 0 0 60px rgba(59, 130, 246, 0.03);
        }
        .card-senior { 
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border: 3px solid #fbbf24;
            box-shadow: 0 0 30px rgba(251, 191, 36, 0.3), inset 0 0 60px rgba(251, 191, 36, 0.05);
        }
        
        .accent-teen { color: #4ade80; }
        .accent-adult { color: #2563eb; }
        .accent-senior { color: #fbbf24; }

        .btn-teen { 
            background: linear-gradient(135deg, #4ade80, #22c55e);
            color: #000;
            box-shadow: 0 4px 20px rgba(74, 222, 128, 0.4);
        }
        .btn-teen:hover { 
            background: linear-gradient(135deg, #22c55e, #16a34a);
            box-shadow: 0 6px 30px rgba(74, 222, 128, 0.6);
        }
        
        .btn-adult { 
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: #fff;
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.4);
        }
        .btn-adult:hover { 
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            box-shadow: 0 6px 30px rgba(59, 130, 246, 0.6);
        }
        
        .btn-senior { 
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #0f172a;
            box-shadow: 0 4px 20px rgba(251, 191, 36, 0.4);
        }
        .btn-senior:hover { 
            background: linear-gradient(135deg, #f59e0b, #d97706);
            box-shadow: 0 6px 30px rgba(251, 191, 36, 0.6);
        }
        
        /* Floating CTA */
        .floating-cta {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 1000;
            animation: float 3s ease-in-out infinite;
        }
        
        @media (max-width: 768px) {
            .floating-cta {
                bottom: 1rem;
                right: 1rem;
                left: 1rem;
            }
        }

        /* Range Input Styling */
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 24px;
            width: 24px;
            border-radius: 50%;
            background: currentColor;
            cursor: pointer;
            margin-top: -10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 6px;
            cursor: pointer;
            background: #e5e7eb;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- Icons as Components ---
        const IconDollar = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
        );
        const IconTarget = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
        );
        const IconShare = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" x2="12" y1="2" y2="15"/></svg>
        );
        const IconArrowRight = ({ className }) => (
             <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
        );
        
        // Product illustration icons - styled like the timeline projects
        const IconVape = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="50" height="200" viewBox="0 0 50 200" className={className} style={{transform: 'scale(0.6)'}}>
                {/* Mouthpiece */}
                <rect x="10" y="0" width="30" height="20" rx="4" fill="currentColor" opacity="0.3"/>
                {/* Cartridge with liquid */}
                <rect x="11" y="20" width="28" height="80" fill="url(#vapeGradient)" opacity="0.8"/>
                <defs>
                    <linearGradient id="vapeGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" stopColor="#FFD700" stopOpacity="0.6"/>
                        <stop offset="100%" stopColor="#FFD700" stopOpacity="0.3"/>
                    </linearGradient>
                </defs>
                {/* Coil */}
                <rect x="10" y="100" width="30" height="8" fill="#FF4500" opacity="0.9">
                    <animate attributeName="opacity" values="0.7;1;0.7" dur="2s" repeatCount="indefinite"/>
                </rect>
                {/* Battery */}
                <rect x="10" y="108" width="30" height="60" rx="0 0 4 4" fill="currentColor" opacity="0.4"/>
                <circle cx="25" cy="120" r="3" fill="currentColor" opacity="0.8">
                    <animate attributeName="opacity" values="0.5;1;0.5" dur="1.5s" repeatCount="indefinite"/>
                </circle>
            </svg>
        );
        
        const IconCigarette = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="50" height="200" viewBox="0 0 50 200" className={className} style={{transform: 'scale(0.6)'}}>
                {/* Ash */}
                <rect x="12" y="0" width="26" height="30" fill="#444">
                    <animate attributeName="height" values="20;30;20" dur="3s" repeatCount="indefinite"/>
                </rect>
                {/* Ember */}
                <rect x="10" y="30" width="30" height="5" fill="#FF4500">
                    <animate attributeName="fill" values="#FF4500;#FF6347;#FF4500" dur="1s" repeatCount="indefinite"/>
                </rect>
                {/* Paper */}
                <rect x="10" y="35" width="30" height="100" fill="#f4f4f4" stroke="#ddd" strokeWidth="1"/>
                {/* Lines on paper */}
                <line x1="10" y1="50" x2="40" y2="50" stroke="#e0e0e0" strokeWidth="0.5"/>
                <line x1="10" y1="65" x2="40" y2="65" stroke="#e0e0e0" strokeWidth="0.5"/>
                <line x1="10" y1="80" x2="40" y2="80" stroke="#e0e0e0" strokeWidth="0.5"/>
                {/* Filter */}
                <rect x="10" y="135" width="30" height="65" fill="#D9824F" rx="0 0 4 4"/>
            </svg>
        );
        
        const IconJoint = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="70" height="200" viewBox="0 0 70 200" className={className} style={{transform: 'scale(0.6)'}}>
                <defs>
                    <clipPath id="jointTaper">
                        <polygon points="17,0 53,0 45,200 25,200"/>
                    </clipPath>
                </defs>
                <g clipPath="url(#jointTaper)">
                    {/* Ash */}
                    <rect x="15" y="0" width="40" height="25" fill="#333">
                        <animate attributeName="height" values="15;25;15" dur="3s" repeatCount="indefinite"/>
                    </rect>
                    {/* Ember */}
                    <rect x="15" y="25" width="40" height="8" fill="#4CAF50">
                        <animate attributeName="fill" values="#4CAF50;#66BB6A;#4CAF50" dur="1.5s" repeatCount="indefinite"/>
                    </rect>
                    {/* Paper */}
                    <rect x="15" y="33" width="40" height="167" fill="#fafafa" stroke="#e8e8e8" strokeWidth="1"/>
                    {/* Rolling paper lines */}
                    <line x1="20" y1="50" x2="50" y2="55" stroke="#e0e0e0" strokeWidth="0.5" opacity="0.6"/>
                    <line x1="20" y1="80" x2="50" y2="85" stroke="#e0e0e0" strokeWidth="0.5" opacity="0.6"/>
                    <line x1="20" y1="110" x2="50" y2="115" stroke="#e0e0e0" strokeWidth="0.5" opacity="0.6"/>
                    <line x1="20" y1="140" x2="50" y2="145" stroke="#e0e0e0" strokeWidth="0.5" opacity="0.6"/>
                </g>
            </svg>
        );
        
        const IconPouch = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="60" height="200" viewBox="0 0 60 200" className={className} style={{transform: 'scale(0.6)'}}>
                {/* Can body */}
                <rect x="8" y="40" width="44" height="120" rx="2" fill="currentColor" opacity="0.3" stroke="currentColor" strokeWidth="2"/>
                {/* Can top lid */}
                <ellipse cx="30" cy="40" rx="22" ry="8" fill="currentColor" opacity="0.5"/>
                <ellipse cx="30" cy="40" rx="18" ry="6" fill="currentColor" opacity="0.3"/>
                {/* Can bottom */}
                <ellipse cx="30" cy="160" rx="22" ry="8" fill="currentColor" opacity="0.4"/>
                {/* Label area */}
                <rect x="10" y="70" width="40" height="60" fill="currentColor" opacity="0.2" rx="1"/>
                {/* Brand marking lines */}
                <line x1="15" y1="85" x2="45" y2="85" stroke="currentColor" strokeWidth="2" opacity="0.6"/>
                <line x1="15" y1="95" x2="45" y2="95" stroke="currentColor" strokeWidth="3" opacity="0.7"/>
                <line x1="15" y1="105" x2="45" y2="105" stroke="currentColor" strokeWidth="2" opacity="0.6"/>
                {/* Shine effect */}
                <rect x="12" y="50" width="3" height="80" fill="#fff" opacity="0.3" rx="1"/>
                <circle cx="30" cy="100" r="2" fill="currentColor" opacity="0.8">
                    <animate attributeName="opacity" values="0.5;0.9;0.5" dur="2s" repeatCount="indefinite"/>
                </circle>
            </svg>
        );

        // --- Data Dictionary ---
        const DATA = {
            "14-18": {
                theme: "teen",
                label: "The Freedom Years",
                tagline: "Your money = Your independence.",
                products: {
                    vape: { item: "AirPods Pro", price: 250, time: "3 Months", emoji: "ðŸŽ§" },
                    cigs: { item: "iPhone 15 Pro", price: 1000, time: "9 Months", emoji: "ðŸ“±" },
                    weed: { item: "First Car", price: 4000, time: "1.5 Years", emoji: "ðŸš—" },
                    pouch: { item: "PS5 Console", price: 500, time: "1 Year", emoji: "ðŸŽ®" }
                }
            },
            "18-35": {
                theme: "adult",
                label: "The Building Years",
                tagline: "Stop delaying your biggest milestones.",
                products: {
                    vape: { item: "Student Loan Payoff", price: 3000, time: "1 Year", emoji: "ðŸŽ“" },
                    cigs: { item: "Dream Vacation", price: 5000, time: "1 Year", emoji: "âœˆï¸" },
                    weed: { item: "House Down Payment", price: 15000, time: "3 Years", emoji: "ðŸ " },
                    pouch: { item: "Wedding/Engagement", price: 6000, time: "2 Years", emoji: "ðŸ’" }
                }
            },
            "35-65": {
                theme: "senior",
                label: "The Legacy Years",
                tagline: "Protect your wealth and your health.",
                products: {
                    vape: { item: "Retirement Boost", price: 148000, time: "20 Years (Inv)", emoji: "ðŸ“ˆ" },
                    cigs: { item: "Mortgage Freedom", price: 60000, time: "7 Years Early", emoji: "ðŸ¡" },
                    weed: { item: "Kids' College Fund", price: 20000, time: "4 Years", emoji: "ðŸŽ“" },
                    pouch: { item: "Dental Implant Bill", price: 4000, time: "Avoided Cost", emoji: "ðŸ¦·" }
                }
            }
        };

        const PRODUCT_LABELS = {
            vape: "Vaping",
            cigs: "Cigarettes",
            weed: "Marijuana",
            pouch: "Pouches/Chew"
        };

        const App = () => {
            const [ageGroup, setAgeGroup] = React.useState("14-18");
            const [product, setProduct] = React.useState("vape");
            const [spend, setSpend] = React.useState(15); // Daily spend
            const [spendFreq, setSpendFreq] = React.useState("daily"); // daily, weekly
            const [customGoal, setCustomGoal] = React.useState("");

            // Derived Data
            const currentData = DATA[ageGroup];
            const currentProductData = currentData.products[product];
            const themeClass = currentData.theme;
            const cardClass = `card-${themeClass.split('-')[1]}`;
            const btnClass = `btn-${themeClass.split('-')[1]}`;
            const textAccent = `accent-${themeClass.split('-')[1]}`;

            // Calculation Logic
            const dailyCost = spendFreq === "daily" ? spend : spend / 7;
            const monthlySavings = dailyCost * 30;
            const yearlySavings = dailyCost * 365;
            
            // For the progress bar/goal
            const goalPrice = currentProductData.price;
            const daysToGoal = Math.ceil(goalPrice / dailyCost);
            const progress = Math.min((yearlySavings / goalPrice) * 100, 100);

            // Share Handler - Captures postcard as image
            const handleShare = async () => {
                const postcardElement = document.getElementById('postcard');
                if (!postcardElement) return;
                
                try {
                    // Capture the card as canvas
                    const canvas = await html2canvas(postcardElement, {
                        backgroundColor: null,
                        scale: 2, // Higher quality
                        logging: false,
                        useCORS: true
                    });
                    
                    // Convert to blob
                    canvas.toBlob(async (blob) => {
                        // Try native share API first (mobile)
                        if (navigator.share && navigator.canShare && navigator.canShare({ files: [new File([blob], 'quit-to-win.png', { type: 'image/png' })] })) {
                            const file = new File([blob], 'quit-to-win-card.png', { type: 'image/png' });
                            try {
                                await navigator.share({
                                    files: [file],
                                    title: 'My Quit to Win Results',
                                    text: `I'm saving $${yearlySavings.toLocaleString()} a year by quitting ${PRODUCT_LABELS[product]}!`
                                });
                            } catch (err) {
                                if (err.name !== 'AbortError') {
                                    downloadImage(canvas);
                                }
                            }
                        } else {
                            // Fallback: download the image
                            downloadImage(canvas);
                        }
                    }, 'image/png');
                } catch (error) {
                    console.error('Error capturing card:', error);
                    alert('Unable to capture card. Try again!');
                }
            };
            
            const downloadImage = (canvas) => {
                const link = document.createElement('a');
                link.download = 'quit-to-win-card.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
                alert('Card image downloaded! Share it on social media.');
            };

            return (
                <div className={`min-h-screen transition-colors duration-700 grain relative ${currentData.theme === 'adult' ? 'bg-slate-50 text-slate-900' : currentData.theme === 'teen' ? 'bg-gray-900 text-gray-100' : 'bg-slate-900 text-slate-200'}`}>
                    
                    {/* Navigation / Header */}
                    <nav className="p-6 max-w-5xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
                        <div className="flex items-center gap-2">
                            <div className={`p-2 rounded-lg ${currentData.theme === 'teen' ? 'bg-green-500 text-black' : currentData.theme === 'adult' ? 'bg-blue-600 text-white' : 'bg-amber-400 text-black'}`}>
                                <IconDollar className="w-6 h-6" />
                            </div>
                            <span className="text-2xl font-bold brand-font tracking-tight">Quit<span className={textAccent}>&</span>Win</span>
                        </div>
                        
                        {/* Age Selector */}
                        <div className={`flex rounded-full p-1 ${currentData.theme === 'adult' ? 'bg-slate-200' : 'bg-white/10'}`}>
                            {Object.keys(DATA).map((age) => (
                                <button
                                    key={age}
                                    onClick={() => setAgeGroup(age)}
                                    className={`px-4 py-2 rounded-full text-sm font-semibold transition-all duration-300 ${ageGroup === age ? 'bg-white text-black shadow-lg' : 'text-gray-500 hover:text-gray-400'}`}
                                >
                                    {age}
                                </button>
                            ))}
                        </div>
                    </nav>

                    {/* Hero Section */}
                    <header className="max-w-4xl mx-auto text-center mt-12 px-4 relative z-10">
                        <span className={`inline-block py-2 px-4 rounded-full text-xs font-bold uppercase tracking-wider mb-4 border-2 ${currentData.theme === 'teen' ? 'border-green-500 text-green-400 bg-green-500/10' : currentData.theme === 'adult' ? 'border-blue-500 text-blue-600 bg-blue-500/10' : 'border-amber-500 text-amber-400 bg-amber-500/10'}`}>
                            {currentData.label}
                        </span>
                        <h1 className="text-5xl md:text-7xl font-bold mb-6 leading-tight drop-shadow-lg">
                            Your habit costs <br/>
                            <span className={`${textAccent} drop-shadow-[0_0_30px_currentColor]`}>more than money.</span>
                        </h1>
                        <p className="text-xl opacity-90 max-w-2xl mx-auto mb-10 drop-shadow">
                            {currentData.tagline}
                        </p>

                        {/* Product Toggles */}
                        <div className="flex flex-wrap justify-center gap-3 mb-16">
                            {Object.entries(PRODUCT_LABELS).map(([key, label]) => (
                                <button
                                    key={key}
                                    onClick={() => setProduct(key)}
                                    className={`px-6 py-3 rounded-xl border-2 font-semibold transition-all relative overflow-hidden ${product === key ? `${btnClass} border-transparent shadow-2xl transform scale-105` : `border-gray-600 bg-transparent hover:border-gray-400 opacity-50 hover:opacity-75`}`}
                                >
                                    {product === key && <span className="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"></span>}
                                    <span className="relative z-10">{label}</span>
                                </button>
                            ))}
                        </div>
                    </header>

                    {/* Product Icons Section */}
                    <section className="max-w-5xl mx-auto px-4 mb-16 relative z-10">
                        <div className="flex justify-center items-center gap-8 md:gap-16 py-8">
                            <div className={`transition-all duration-500 cursor-pointer ${product === 'vape' ? `${textAccent} scale-150 opacity-100` : 'opacity-15 scale-75 hover:opacity-30 hover:scale-90'}`} onClick={() => setProduct('vape')}>
                                <IconVape className="w-16 h-32" />
                            </div>
                            <div className={`transition-all duration-500 cursor-pointer ${product === 'cigs' ? `${textAccent} scale-150 opacity-100` : 'opacity-15 scale-75 hover:opacity-30 hover:scale-90'}`} onClick={() => setProduct('cigs')}>
                                <IconCigarette className="w-16 h-32" />
                            </div>
                            <div className={`transition-all duration-500 cursor-pointer ${product === 'weed' ? `${textAccent} scale-150 opacity-100` : 'opacity-15 scale-75 hover:opacity-30 hover:scale-90'}`} onClick={() => setProduct('weed')}>
                                <IconJoint className="w-16 h-32" />
                            </div>
                            <div className={`transition-all duration-500 cursor-pointer ${product === 'pouch' ? `${textAccent} scale-150 opacity-100` : 'opacity-15 scale-75 hover:opacity-30 hover:scale-90'}`} onClick={() => setProduct('pouch')}>
                                <IconPouch className="w-16 h-32" />
                            </div>
                        </div>
                    </section>

                    {/* Main Grid */}
                    <main className="max-w-6xl mx-auto px-4 grid grid-cols-1 lg:grid-cols-2 gap-12 pb-12">
                        
                        {/* Left: Calculator Input */}
                        <div className={`p-8 rounded-3xl ${currentData.theme === 'adult' ? 'bg-white shadow-xl' : 'bg-white/5 border border-white/10'}`}>
                            <h2 className="text-2xl font-bold mb-6 flex items-center gap-3">
                                <IconTarget className={textAccent} />
                                Calculate Your Savings
                            </h2>
                            
                            <div className="space-y-8">
                                <div>
                                    <label className="block text-sm font-medium mb-2 opacity-70">
                                        How much do you spend?
                                    </label>
                                    <div className="flex items-center gap-4">
                                        <span className="text-3xl font-bold">${spend}</span>
                                        <input 
                                            type="range" 
                                            min="1" 
                                            max="100" 
                                            value={spend} 
                                            onChange={(e) => setSpend(Number(e.target.value))}
                                            className={`flex-1 h-2 rounded-lg appearance-none cursor-pointer ${textAccent}`}
                                        />
                                    </div>
                                </div>

                                <div>
                                    <label className="block text-sm font-medium mb-2 opacity-70">
                                        Frequency
                                    </label>
                                    <div className="flex gap-4">
                                        <button 
                                            onClick={() => setSpendFreq('daily')}
                                            className={`flex-1 py-3 rounded-lg border ${spendFreq === 'daily' ? `${textAccent} border-current bg-current/10` : 'border-gray-600 opacity-50'}`}
                                        >
                                            Daily
                                        </button>
                                        <button 
                                            onClick={() => setSpendFreq('weekly')}
                                            className={`flex-1 py-3 rounded-lg border ${spendFreq === 'weekly' ? `${textAccent} border-current bg-current/10` : 'border-gray-600 opacity-50'}`}
                                        >
                                            Weekly
                                        </button>
                                    </div>
                                </div>

                                <div className="pt-6 border-t border-gray-700/20">
                                    <div className="grid grid-cols-3 gap-4 text-center">
                                        <div className="p-4 rounded-2xl bg-black/5">
                                            <div className="text-xs opacity-60 uppercase mb-1">1 Month</div>
                                            <div className={`text-xl font-bold ${textAccent}`}>${Math.round(monthlySavings).toLocaleString()}</div>
                                        </div>
                                        <div className={`p-4 rounded-2xl ${currentData.theme === 'teen' ? 'bg-green-500/20' : currentData.theme === 'adult' ? 'bg-blue-100' : 'bg-amber-500/20'}`}>
                                            <div className="text-xs opacity-60 uppercase mb-1">1 Year</div>
                                            <div className={`text-2xl font-bold ${textAccent}`}>${Math.round(yearlySavings).toLocaleString()}</div>
                                        </div>
                                        <div className="p-4 rounded-2xl bg-black/5">
                                            <div className="text-xs opacity-60 uppercase mb-1">10 Years</div>
                                            <div className={`text-xl font-bold ${textAccent}`}>${Math.round(yearlySavings * 10).toLocaleString()}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Right: The Postcard Preview */}
                        <div className="flex flex-col items-center">
                            <h2 className="text-2xl font-bold mb-6 flex items-center gap-3">
                                <IconShare className={textAccent} />
                                Your Reality Check
                            </h2>

                            {/* THE POSTCARD */}
                            <div id="postcard" className={`relative w-full max-w-md aspect-[4/5] rounded-3xl p-8 flex flex-col justify-between transition-all duration-500 ${cardClass} group`}>
                                {/* Decorative BG Elements */}
                                <div className={`absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-current to-transparent opacity-10 rounded-bl-full ${textAccent}`}></div>
                                
                                <div>
                                    <div className="flex justify-between items-start mb-8">
                                        <div className={`font-black text-lg tracking-tighter uppercase brand-font italic leading-none`}>
                                            Kick It <br/>
                                            <span className={`${textAccent} font-medium tracking-normal not-italic`}>California</span>
                                        </div>
                                        <span className="text-5xl animate-float">
                                            {currentProductData.emoji}
                                        </span>
                                    </div>
                                    
                                    <h3 className="text-3xl font-bold mb-2 leading-tight">
                                        I'm trading <br/>
                                        <span className="opacity-50 strike-through decoration-2 line-through decoration-red-500">{PRODUCT_LABELS[product]}</span>
                                    </h3>
                                    <h3 className={`text-3xl font-bold mb-6 ${textAccent}`}>
                                        for {currentProductData.item}
                                    </h3>

                                    <p className="text-sm opacity-80 leading-relaxed">
                                        By quitting now, I save <span className="font-bold border-b border-current">${Math.round(yearlySavings).toLocaleString()}</span> this year alone. 
                                        {daysToGoal < 365 ? 
                                            ` I can afford this goal in just ${daysToGoal} days.` : 
                                            ` That's a huge step toward financial freedom.`}
                                    </p>
                                </div>

                                <div>
                                    <div className="w-full h-2 bg-gray-200/20 rounded-full mb-4 overflow-hidden">
                                        <div 
                                            className={`h-full transition-all duration-1000 ease-out ${currentData.theme === 'teen' ? 'bg-green-500' : currentData.theme === 'adult' ? 'bg-blue-600' : 'bg-amber-400'}`} 
                                            style={{ width: `${progress}%` }}
                                        ></div>
                                    </div>
                                    <div className="flex justify-between text-xs opacity-60 font-mono">
                                        <span>$0</span>
                                        <span>GOAL: ${goalPrice.toLocaleString()}</span>
                                    </div>
                                </div>
                                
                                {/* Hover Effect Overlay for sharing */}
                                <div className="absolute inset-0 bg-black/60 backdrop-blur-sm rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                                    <button 
                                        onClick={handleShare}
                                        className="bg-white text-black px-6 py-3 rounded-full font-bold transform translate-y-4 group-hover:translate-y-0 transition-transform flex items-center gap-2 hover:bg-gray-100"
                                    >
                                        <IconShare className="w-4 h-4" />
                                        Share Image
                                    </button>
                                </div>
                            </div>
                            
                            <p className="mt-6 text-sm opacity-50 text-center">
                                Hover card to share your win. <br/>Based on avg prices in US (2025).
                            </p>
                        </div>
                    </main>

                    {/* Floating CTA */}
                    <div className="floating-cta">
                        <div className={`p-6 rounded-2xl text-center shadow-2xl border backdrop-blur-sm transition-colors duration-500 ${currentData.theme === 'adult' ? 'bg-blue-50/95 border-blue-200' : 'bg-gray-900/95 border-white/20'}`}>
                            <div className="flex justify-center mb-3">
                                <img 
                                    src="https://kicform.org/hs-fs/hubfs/kic%20logo2.png?width=118&height=40&name=kic%20logo2.png" 
                                    alt="Kick It California Logo" 
                                    className="h-8 object-contain"
                                />
                            </div>
                            <h3 className="text-xl font-bold mb-2">
                                Ready to quit?
                            </h3>
                            <p className="text-sm opacity-80 mb-4 max-w-xs">
                                Get free, personalized support now.
                            </p>
                            <a 
                                href="https://kicform.org/kick-it-2" 
                                target="_blank"
                                className={`inline-flex items-center gap-2 px-6 py-3 rounded-xl text-sm font-bold transition-transform hover:scale-105 ${btnClass}`}
                            >
                                Kick It Now
                                <IconArrowRight className="w-4 h-4" />
                            </a>
                        </div>
                    </div>

                    {/* Footer */}
                    <footer className={`py-12 text-center border-t ${currentData.theme === 'adult' ? 'border-gray-200' : 'border-gray-800'}`}>
                        <p className="opacity-40 text-sm">
                            Kick It California is a free program of UC San Diego.<br/>
                            Disclaimer: Estimates only. Prices vary by state.
                        </p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
