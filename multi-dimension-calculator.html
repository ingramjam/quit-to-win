<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kick It California - True Cost Calculator</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- html2canvas for image generation -->
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        h1, h2, h3, .brand-font { font-family: 'Space Grotesk', sans-serif; }
        
        /* Custom Animations */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        .animate-float { animation: float 6s ease-in-out infinite; }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(74, 222, 128, 0.3); }
            50% { box-shadow: 0 0 40px rgba(74, 222, 128, 0.6); }
        }
        .animate-pulse-glow { animation: pulse-glow 3s ease-in-out infinite; }

        /* Theme Gradients */
        .theme-teen { background: linear-gradient(135deg, #111827 0%, #000000 100%); color: #4ade80; }
        .theme-adult { background: linear-gradient(135deg, #eff6ff 0%, #ffffff 100%); color: #1e3a8a; }
        .theme-senior { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); color: #fbbf24; }

        .card-teen { background: #1f2937; border: 2px solid #4ade80; box-shadow: 0 0 20px rgba(74, 222, 128, 0.2); }
        .card-adult { background: #ffffff; border: 1px solid #bfdbfe; box-shadow: 0 10px 30px rgba(59, 130, 246, 0.1); }
        .card-senior { background: #1e293b; border: 1px solid #fbbf24; box-shadow: 0 10px 30px rgba(251, 191, 36, 0.15); }
        
        .accent-teen { color: #4ade80; }
        .accent-adult { color: #2563eb; }
        .accent-senior { color: #fbbf24; }

        .btn-teen { background-color: #4ade80; color: #000; }
        .btn-teen:hover { background-color: #22c55e; }
        
        .btn-adult { background-color: #2563eb; color: #fff; }
        .btn-adult:hover { background-color: #1d4ed8; }
        
        .btn-senior { background-color: #fbbf24; color: #0f172a; }
        .btn-senior:hover { background-color: #f59e0b; }

        /* Range Input Styling */
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: currentColor;
            cursor: pointer;
            margin-top: -8px;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: #e5e7eb;
            border-radius: 2px;
        }

        /* Organ Health Meter */
        .organ-meter {
            width: 100%;
            height: 12px;
            background: linear-gradient(to right, #ef4444 0%, #f59e0b 50%, #22c55e 100%);
            border-radius: 999px;
            position: relative;
            overflow: hidden;
        }
        .organ-meter-overlay {
            position: absolute;
            right: 0;
            top: 0;
            bottom: 0;
            background: rgba(0,0,0,0.6);
            transition: width 1s ease-out;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- Icons as Components ---
        const IconDollar = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
        );
        const IconBrain = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></svg>
        );
        const IconLeaf = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z"/><path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"/></svg>
        );
        const IconTarget = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
        );
        const IconShare = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" x2="12" y1="2" y2="15"/></svg>
        );
        const IconArrowRight = ({ className }) => (
             <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
        );

        // --- Data Dictionary ---
        const DATA = {
            "14-18": {
                theme: "teen",
                label: "The Freedom Years",
                tagline: "Your money = Your independence.",
                products: {
                    vape: { item: "AirPods Pro", price: 250, time: "3 Months", emoji: "üéß" },
                    cigs: { item: "iPhone 15 Pro", price: 1000, time: "9 Months", emoji: "üì±" },
                    weed: { item: "First Car", price: 4000, time: "1.5 Years", emoji: "üöó" },
                    pouch: { item: "PS5 Console", price: 500, time: "1 Year", emoji: "üéÆ" }
                },
                health: {
                    headline: "Your body is still developing",
                    facts: [
                        "Brain development continues until age 25",
                        "Nicotine rewires developing neural pathways",
                        "Teen users are 3x more likely to become addicted",
                        "Early vaping increases anxiety and depression risk"
                    ]
                },
                environment: {
                    headline: "Your generation will inherit this planet",
                    stats: {
                        vape: { waste: "5.5 lbs", trees: "12", water: "225 gal" },
                        cigs: { waste: "17.6 lbs", trees: "40", water: "740 gal" },
                        weed: { waste: "11 lbs", trees: "25", water: "396 gal" },
                        pouch: { waste: "6.6 lbs", trees: "15", water: "251 gal" }
                    }
                }
            },
            "18-35": {
                theme: "adult",
                label: "The Building Years",
                tagline: "Stop delaying your biggest milestones.",
                products: {
                    vape: { item: "Student Loan Payoff", price: 3000, time: "1 Year", emoji: "üéì" },
                    cigs: { item: "Dream Vacation", price: 5000, time: "1 Year", emoji: "‚úàÔ∏è" },
                    weed: { item: "House Down Payment", price: 15000, time: "3 Years", emoji: "üè†" },
                    pouch: { item: "Wedding/Engagement", price: 6000, time: "2 Years", emoji: "üíç" }
                },
                health: {
                    headline: "Peak health = Peak performance",
                    facts: [
                        "Lung capacity decreases by 20% in regular users",
                        "Fertility issues 2x more common in smokers",
                        "Quitting improves cardiovascular health within weeks",
                        "Sleep quality and energy levels dramatically improve"
                    ]
                },
                environment: {
                    headline: "Building your life, not destroying nature",
                    stats: {
                        vape: { waste: "6.6 lbs", trees: "15", water: "264 gal" },
                        cigs: { waste: "22 lbs", trees: "50", water: "925 gal" },
                        weed: { waste: "13.2 lbs", trees: "30", water: "475 gal" },
                        pouch: { waste: "8.8 lbs", trees: "18", water: "317 gal" }
                    }
                }
            },
            "35-65": {
                theme: "senior",
                label: "The Legacy Years",
                tagline: "Protect your wealth and your health.",
                products: {
                    vape: { item: "Retirement Boost", price: 148000, time: "20 Years (Inv)", emoji: "üìà" },
                    cigs: { item: "Mortgage Freedom", price: 60000, time: "7 Years Early", emoji: "üè°" },
                    weed: { item: "Kids' College Fund", price: 20000, time: "4 Years", emoji: "üéì" },
                    pouch: { item: "Dental Implant Bill", price: 4000, time: "Avoided Cost", emoji: "ü¶∑" }
                },
                health: {
                    headline: "Years added to your life",
                    facts: [
                        "10+ years of life expectancy can be regained by quitting",
                        "Risk of heart disease drops by 50% within 1 year",
                        "Cancer risk decreases significantly over time",
                        "Better quality of life with grandchildren and family"
                    ]
                },
                environment: {
                    headline: "Leave a green legacy for your grandchildren",
                    stats: {
                        vape: { waste: "8.8 lbs", trees: "20", water: "343 gal" },
                        cigs: { waste: "26.5 lbs", trees: "60", water: "1110 gal" },
                        weed: { waste: "15.4 lbs", trees: "35", water: "555 gal" },
                        pouch: { waste: "11 lbs", trees: "22", water: "370 gal" }
                    }
                }
            }
        };

        const PRODUCT_LABELS = {
            vape: "Vaping",
            cigs: "Cigarettes",
            weed: "Marijuana",
            pouch: "Pouches/Chew"
        };

        const DIMENSION_TABS = [
            { id: 'money', label: 'Money', icon: IconDollar },
            { id: 'mind', label: 'Mind', icon: IconBrain },
            { id: 'environment', label: 'Environment', icon: IconLeaf }
        ];

        const App = () => {
            const [ageGroup, setAgeGroup] = React.useState("14-18");
            const [product, setProduct] = React.useState("vape");
            const [dimension, setDimension] = React.useState("money"); // money, mind, environment
            const [spend, setSpend] = React.useState(15); // Daily spend
            const [spendFreq, setSpendFreq] = React.useState("daily"); // daily, weekly
            const [yearsQuit, setYearsQuit] = React.useState(1); // Years quit for Mind & Environment

            // Derived Data
            const currentData = DATA[ageGroup];
            const currentProductData = currentData.products[product];
            const themeClass = currentData.theme;
            const cardClass = `card-${themeClass.split('-')[1]}`;
            const btnClass = `btn-${themeClass.split('-')[1]}`;
            const textAccent = `accent-${themeClass.split('-')[1]}`;

            // Calculation Logic
            const dailyCost = spendFreq === "daily" ? spend : spend / 7;
            const monthlySavings = dailyCost * 30;
            const yearlySavings = dailyCost * 365;
            
            // For the progress bar/goal
            const goalPrice = currentProductData.price;
            const daysToGoal = Math.ceil(goalPrice / dailyCost);
            const progress = Math.min((yearlySavings / goalPrice) * 100, 100);

            // Environmental stats per year
            const envStats = currentData.environment.stats[product];

            // Share/Copy Handler - Converts card to image
            const handleShare = async () => {
                const postcardElement = document.getElementById('postcard');
                if (!postcardElement) return;
                
                try {
                    // Hide the hover overlay temporarily
                    const overlay = postcardElement.querySelector('.share-overlay');
                    if (overlay) overlay.style.display = 'none';
                    
                    // Generate canvas from the postcard
                    const canvas = await html2canvas(postcardElement, {
                        backgroundColor: null,
                        scale: 2, // Higher quality
                        logging: false,
                        useCORS: true
                    });
                    
                    // Show overlay again
                    if (overlay) overlay.style.display = 'flex';
                    
                    // Convert to blob
                    canvas.toBlob(async (blob) => {
                        try {
                            // Try to use native share if available
                            if (navigator.share && navigator.canShare && navigator.canShare({ files: [new File([blob], 'quit-win.png', { type: 'image/png' })] })) {
                                await navigator.share({
                                    files: [new File([blob], 'quit-win.png', { type: 'image/png' })],
                                    title: 'My Quit & Win Reality Check',
                                    text: 'Check out what I can achieve by quitting! üéØ'
                                });
                            } else {
                                // Fallback: copy to clipboard
                                await navigator.clipboard.write([
                                    new ClipboardItem({
                                        'image/png': blob
                                    })
                                ]);
                                alert('Postcard image copied to clipboard! üìã Paste it anywhere to share.');
                            }
                        } catch (err) {
                            // Final fallback: download
                            const url = URL.createObjectURL(blob);
                            const a = document.createElement('a');
                            a.href = url;
                            a.download = 'quit-win-postcard.png';
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                            URL.revokeObjectURL(url);
                            alert('Postcard downloaded! üì• Share it on social media.');
                        }
                    }, 'image/png');
                } catch (error) {
                    console.error('Error generating image:', error);
                    alert('Sorry, there was an error generating the image. Please try again.');
                }
            };

            // Render dimension-specific content
            const renderDimensionContent = () => {
                if (dimension === 'money') {
                    return (
                        <div className={`p-8 rounded-3xl ${currentData.theme === 'adult' ? 'bg-white shadow-xl' : 'bg-white/5 border border-white/10'}`}>
                            <h2 className="text-2xl font-bold mb-6 flex items-center gap-3">
                                <IconTarget className={textAccent} />
                                Calculate Your Savings
                            </h2>
                            
                            <div className="space-y-8">
                                <div>
                                    <label className="block text-sm font-medium mb-2 opacity-70">
                                        How much do you spend?
                                    </label>
                                    <div className="flex items-center gap-4">
                                        <span className="text-3xl font-bold">${spend}</span>
                                        <input 
                                            type="range" 
                                            min="1" 
                                            max="100" 
                                            value={spend} 
                                            onChange={(e) => setSpend(Number(e.target.value))}
                                            className={`flex-1 h-2 rounded-lg appearance-none cursor-pointer ${textAccent}`}
                                        />
                                    </div>
                                </div>

                                <div>
                                    <label className="block text-sm font-medium mb-2 opacity-70">
                                        Frequency
                                    </label>
                                    <div className="flex gap-4">
                                        <button 
                                            onClick={() => setSpendFreq('daily')}
                                            className={`flex-1 py-3 rounded-lg border ${spendFreq === 'daily' ? `${textAccent} border-current bg-current/10` : 'border-gray-600 opacity-50'}`}
                                        >
                                            Daily
                                        </button>
                                        <button 
                                            onClick={() => setSpendFreq('weekly')}
                                            className={`flex-1 py-3 rounded-lg border ${spendFreq === 'weekly' ? `${textAccent} border-current bg-current/10` : 'border-gray-600 opacity-50'}`}
                                        >
                                            Weekly
                                        </button>
                                    </div>
                                </div>

                                <div className="pt-6 border-t border-gray-700/20">
                                    <div className="grid grid-cols-3 gap-4 text-center">
                                        <div className="p-4 rounded-2xl bg-black/5">
                                            <div className="text-xs opacity-60 uppercase mb-1">1 Month</div>
                                            <div className={`text-xl font-bold ${textAccent}`}>${Math.round(monthlySavings).toLocaleString()}</div>
                                        </div>
                                        <div className={`p-4 rounded-2xl ${currentData.theme === 'teen' ? 'bg-green-500/20' : currentData.theme === 'adult' ? 'bg-blue-100' : 'bg-amber-500/20'}`}>
                                            <div className="text-xs opacity-60 uppercase mb-1">1 Year</div>
                                            <div className={`text-2xl font-bold ${textAccent}`}>${Math.round(yearlySavings).toLocaleString()}</div>
                                        </div>
                                        <div className="p-4 rounded-2xl bg-black/5">
                                            <div className="text-xs opacity-60 uppercase mb-1">10 Years</div>
                                            <div className={`text-xl font-bold ${textAccent}`}>${Math.round(yearlySavings * 10).toLocaleString()}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    );
                } else if (dimension === 'mind') {
                    // Calculate health improvements based on years quit
                    const lungImprovement = Math.min(30 + (yearsQuit * 15), 95);
                    const heartRisk = Math.max(50 - (yearsQuit * 10), 5);
                    const brainClarity = Math.min(85 + (yearsQuit * 5), 100);
                    const energyBoost = Math.min(40 + (yearsQuit * 12), 95);
                    
                    return (
                        <div className={`p-8 rounded-3xl ${currentData.theme === 'adult' ? 'bg-white shadow-xl' : 'bg-white/5 border border-white/10'}`}>
                            <h2 className="text-2xl font-bold mb-6 flex items-center gap-3">
                                <IconBrain className={textAccent} />
                                Health Impact Visualization
                            </h2>
                            
                            <div className="space-y-8">
                                {/* Years Quit Slider */}
                                <div>
                                    <label className="block text-sm font-medium mb-2 opacity-70">
                                        Years Quit
                                    </label>
                                    <div className="flex items-center gap-4">
                                        <span className={`text-3xl font-bold ${textAccent}`}>{yearsQuit}</span>
                                        <input 
                                            type="range" 
                                            min="1" 
                                            max="10" 
                                            value={yearsQuit} 
                                            onChange={(e) => setYearsQuit(Number(e.target.value))}
                                            className={`flex-1 h-2 rounded-lg appearance-none cursor-pointer ${textAccent}`}
                                        />
                                        <span className="text-sm opacity-60">{yearsQuit === 1 ? '1 year' : `${yearsQuit} years`}</span>
                                    </div>
                                </div>

                                <div className={`p-6 rounded-2xl ${currentData.theme === 'adult' ? 'bg-blue-50' : 'bg-white/5'}`}>
                                    <h3 className="font-bold mb-4">{currentData.health.headline}</h3>
                                    <ul className="space-y-3">
                                        {currentData.health.facts.map((fact, idx) => (
                                            <li key={idx} className="flex items-start gap-3">
                                                <span className={`${textAccent} text-xl mt-1`}>‚Ä¢</span>
                                                <span className="text-sm opacity-90">{fact}</span>
                                            </li>
                                        ))}
                                    </ul>
                                </div>

                                <div>
                                    <h3 className="font-bold mb-4 text-center">Organ Health Recovery Timeline</h3>
                                    <div className="space-y-4">
                                        <div>
                                            <div className="flex justify-between mb-2 text-sm">
                                                <span className="opacity-70">ü´Å Lungs</span>
                                                <span className={`font-bold ${textAccent}`}>+{lungImprovement.toFixed(0)}% capacity</span>
                                            </div>
                                            <div className="organ-meter">
                                                <div className="organ-meter-overlay" style={{width: `${100 - lungImprovement}%`}}></div>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <div className="flex justify-between mb-2 text-sm">
                                                <span className="opacity-70">‚ù§Ô∏è Heart</span>
                                                <span className={`font-bold ${textAccent}`}>Risk -{heartRisk.toFixed(0)}%</span>
                                            </div>
                                            <div className="organ-meter">
                                                <div className="organ-meter-overlay" style={{width: `${heartRisk}%`}}></div>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <div className="flex justify-between mb-2 text-sm">
                                                <span className="opacity-70">üß† Brain</span>
                                                <span className={`font-bold ${textAccent}`}>{brainClarity.toFixed(0)}% clarity</span>
                                            </div>
                                            <div className="organ-meter">
                                                <div className="organ-meter-overlay" style={{width: `${100 - brainClarity}%`}}></div>
                                            </div>
                                        </div>

                                        <div>
                                            <div className="flex justify-between mb-2 text-sm">
                                                <span className="opacity-70">üí™ Energy</span>
                                                <span className={`font-bold ${textAccent}`}>+{energyBoost.toFixed(0)}%</span>
                                            </div>
                                            <div className="organ-meter">
                                                <div className="organ-meter-overlay" style={{width: `${100 - energyBoost}%`}}></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div className={`p-4 rounded-xl text-center ${currentData.theme === 'teen' ? 'bg-green-500/10' : currentData.theme === 'adult' ? 'bg-blue-100' : 'bg-amber-500/10'}`}>
                                    <p className="text-sm opacity-80">
                                        <span className={`font-bold ${textAccent}`}>After {yearsQuit} {yearsQuit === 1 ? 'year' : 'years'}:</span> Your body continues healing. Keep going!
                                    </p>
                                </div>
                            </div>
                        </div>
                    );
                } else { // environment
                    // Calculate environmental impact based on years quit
                    const totalWaste = (parseFloat(envStats.waste) * yearsQuit).toFixed(1);
                    const totalTrees = parseInt(envStats.trees) * yearsQuit;
                    const totalWater = (parseFloat(envStats.water) * yearsQuit).toFixed(0);
                    
                    return (
                        <div className={`p-8 rounded-3xl ${currentData.theme === 'adult' ? 'bg-white shadow-xl' : 'bg-white/5 border border-white/10'}`}>
                            <h2 className="text-2xl font-bold mb-6 flex items-center gap-3">
                                <IconLeaf className={textAccent} />
                                Environmental Impact
                            </h2>
                            
                            <div className="space-y-8">
                                {/* Years Quit Slider */}
                                <div>
                                    <label className="block text-sm font-medium mb-2 opacity-70">
                                        Years Quit
                                    </label>
                                    <div className="flex items-center gap-4">
                                        <span className={`text-3xl font-bold ${textAccent}`}>{yearsQuit}</span>
                                        <input 
                                            type="range" 
                                            min="1" 
                                            max="10" 
                                            value={yearsQuit} 
                                            onChange={(e) => setYearsQuit(Number(e.target.value))}
                                            className={`flex-1 h-2 rounded-lg appearance-none cursor-pointer ${textAccent}`}
                                        />
                                        <span className="text-sm opacity-60">{yearsQuit === 1 ? '1 year' : `${yearsQuit} years`}</span>
                                    </div>
                                </div>

                                <div className={`p-6 rounded-2xl ${currentData.theme === 'adult' ? 'bg-green-50' : 'bg-white/5'}`}>
                                    <h3 className="font-bold mb-2">{currentData.environment.headline}</h3>
                                    <p className="text-sm opacity-80">
                                        Your habit doesn't just hurt you‚Äîit harms the planet. Here's what you'll save over {yearsQuit} {yearsQuit === 1 ? 'year' : 'years'} by quitting:
                                    </p>
                                </div>

                                <div className="grid grid-cols-1 gap-4">
                                    <div className={`p-6 rounded-2xl border-2 ${currentData.theme === 'teen' ? 'border-green-500/30 bg-green-500/5' : currentData.theme === 'adult' ? 'border-blue-200 bg-blue-50' : 'border-amber-500/30 bg-amber-500/5'}`}>
                                        <div className="flex items-center justify-between mb-2">
                                            <span className="text-3xl">üóëÔ∏è</span>
                                            <span className={`text-3xl font-bold ${textAccent}`}>{totalWaste} lbs</span>
                                        </div>
                                        <p className="text-sm font-medium">Waste Prevented</p>
                                        <p className="text-xs opacity-60 mt-1">Plastic, batteries, and toxic materials over {yearsQuit} {yearsQuit === 1 ? 'year' : 'years'}</p>
                                    </div>

                                    <div className={`p-6 rounded-2xl border-2 ${currentData.theme === 'teen' ? 'border-green-500/30 bg-green-500/5' : currentData.theme === 'adult' ? 'border-blue-200 bg-blue-50' : 'border-amber-500/30 bg-amber-500/5'}`}>
                                        <div className="flex items-center justify-between mb-2">
                                            <span className="text-3xl">üå≤</span>
                                            <span className={`text-3xl font-bold ${textAccent}`}>{totalTrees}</span>
                                        </div>
                                        <p className="text-sm font-medium">Trees Saved</p>
                                        <p className="text-xs opacity-60 mt-1">Equivalent in paper and manufacturing impact over {yearsQuit} {yearsQuit === 1 ? 'year' : 'years'}</p>
                                    </div>

                                    <div className={`p-6 rounded-2xl border-2 ${currentData.theme === 'teen' ? 'border-green-500/30 bg-green-500/5' : currentData.theme === 'adult' ? 'border-blue-200 bg-blue-50' : 'border-amber-500/30 bg-amber-500/5'}`}>
                                        <div className="flex items-center justify-between mb-2">
                                            <span className="text-3xl">üíß</span>
                                            <span className={`text-3xl font-bold ${textAccent}`}>{totalWater} gal</span>
                                        </div>
                                        <p className="text-sm font-medium">Water Conserved</p>
                                        <p className="text-xs opacity-60 mt-1">Manufacturing and agricultural water usage over {yearsQuit} {yearsQuit === 1 ? 'year' : 'years'}</p>
                                    </div>
                                </div>

                                <div className={`p-4 rounded-xl text-center ${currentData.theme === 'teen' ? 'bg-green-500/10' : currentData.theme === 'adult' ? 'bg-green-100' : 'bg-amber-500/10'}`}>
                                    <p className="text-sm opacity-80">
                                        <span className={`font-bold ${textAccent}`}>Your impact matters!</span> {totalTrees} trees and {totalWater} gallons of water saved! üåç
                                    </p>
                                </div>
                            </div>
                        </div>
                    );
                }
            };

            const renderPostcard = () => {
                if (dimension === 'money') {
                    return (
                        <div id="postcard" className={`relative w-full max-w-md aspect-[4/5] rounded-3xl p-8 flex flex-col justify-between transition-all duration-500 ${cardClass} group`}>
                            <div className={`absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-current to-transparent opacity-10 rounded-bl-full ${textAccent}`}></div>
                            
                            <div>
                                <div className="flex justify-between items-start mb-8">
                                    <div className={`font-black text-lg tracking-tighter uppercase brand-font italic leading-none`}>
                                        Kick It <br/>
                                        <span className={`${textAccent} font-medium tracking-normal not-italic`}>California</span>
                                    </div>
                                    <span className="text-5xl animate-float">
                                        {currentProductData.emoji}
                                    </span>
                                </div>
                                
                                <h3 className="text-3xl font-bold mb-2 leading-tight">
                                    I'm trading <br/>
                                    <span className="opacity-50 strike-through decoration-2 line-through decoration-red-500">{PRODUCT_LABELS[product]}</span>
                                </h3>
                                <h3 className={`text-3xl font-bold mb-6 ${textAccent}`}>
                                    for {currentProductData.item}
                                </h3>

                                <p className="text-sm opacity-80 leading-relaxed">
                                    By quitting now, I save <span className="font-bold border-b border-current">${Math.round(yearlySavings).toLocaleString()}</span> this year alone. 
                                    {daysToGoal < 365 ? 
                                        ` I can afford this goal in just ${daysToGoal} days.` : 
                                        ` That's a huge step toward financial freedom.`}
                                </p>
                            </div>

                            <div>
                                <div className="w-full h-2 bg-gray-200/20 rounded-full mb-4 overflow-hidden">
                                    <div 
                                        className={`h-full transition-all duration-1000 ease-out ${currentData.theme === 'teen' ? 'bg-green-500' : currentData.theme === 'adult' ? 'bg-blue-600' : 'bg-amber-400'}`} 
                                        style={{ width: `${progress}%` }}
                                    ></div>
                                </div>
                                <div className="flex justify-between text-xs opacity-60 font-mono">
                                    <span>$0</span>
                                    <span>GOAL: ${goalPrice.toLocaleString()}</span>
                                </div>
                            </div>
                            
                            <div className="share-overlay absolute inset-0 bg-black/60 backdrop-blur-sm rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                                <button 
                                    onClick={handleShare}
                                    className="bg-white text-black px-6 py-3 rounded-full font-bold transform translate-y-4 group-hover:translate-y-0 transition-transform flex items-center gap-2 hover:bg-gray-100"
                                >
                                    <IconShare className="w-4 h-4" />
                                    Share as Image
                                </button>
                            </div>
                        </div>
                    );
                } else if (dimension === 'mind') {
                    return (
                        <div id="postcard" className={`relative w-full max-w-md aspect-[4/5] rounded-3xl p-8 flex flex-col justify-between transition-all duration-500 ${cardClass} group`}>
                            <div className={`absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-current to-transparent opacity-10 rounded-bl-full ${textAccent}`}></div>
                            
                            <div>
                                <div className="flex justify-between items-start mb-8">
                                    <div className={`font-black text-lg tracking-tighter uppercase brand-font italic leading-none`}>
                                        Kick It <br/>
                                        <span className={`${textAccent} font-medium tracking-normal not-italic`}>California</span>
                                    </div>
                                    <span className="text-5xl animate-pulse-glow">
                                        üß†
                                    </span>
                                </div>
                                
                                <h3 className="text-3xl font-bold mb-4 leading-tight">
                                    Choosing <span className={textAccent}>health</span><br/>
                                    over habit
                                </h3>

                                <div className="space-y-3 mb-6">
                                    {currentData.health.facts.slice(0, 2).map((fact, idx) => (
                                        <div key={idx} className={`p-3 rounded-lg ${currentData.theme === 'adult' ? 'bg-blue-50/50' : 'bg-white/5'}`}>
                                            <p className="text-xs opacity-90">‚úì {fact}</p>
                                        </div>
                                    ))}
                                </div>

                                <p className="text-sm opacity-80 leading-relaxed">
                                    My body deserves better. Recovery starts <span className={`font-bold ${textAccent}`}>immediately</span>.
                                </p>
                            </div>

                            <div className={`p-4 rounded-xl text-center ${currentData.theme === 'teen' ? 'bg-green-500/20' : currentData.theme === 'adult' ? 'bg-blue-100' : 'bg-amber-500/20'}`}>
                                <p className={`text-sm font-bold ${textAccent}`}>
                                    Every day quit is a win for my health üí™
                                </p>
                            </div>
                            
                            <div className="share-overlay absolute inset-0 bg-black/60 backdrop-blur-sm rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                                <button 
                                    onClick={handleShare}
                                    className="bg-white text-black px-6 py-3 rounded-full font-bold transform translate-y-4 group-hover:translate-y-0 transition-transform flex items-center gap-2 hover:bg-gray-100"
                                >
                                    <IconShare className="w-4 h-4" />
                                    Share as Image
                                </button>
                            </div>
                        </div>
                    );
                } else { // environment
                    return (
                        <div id="postcard" className={`relative w-full max-w-md aspect-[4/5] rounded-3xl p-8 flex flex-col justify-between transition-all duration-500 ${cardClass} group`}>
                            <div className={`absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-current to-transparent opacity-10 rounded-bl-full ${textAccent}`}></div>
                            
                            <div>
                                <div className="flex justify-between items-start mb-8">
                                    <div className={`font-black text-lg tracking-tighter uppercase brand-font italic leading-none`}>
                                        Kick It <br/>
                                        <span className={`${textAccent} font-medium tracking-normal not-italic`}>California</span>
                                    </div>
                                    <span className="text-5xl animate-float">
                                        üåç
                                    </span>
                                </div>
                                
                                <h3 className="text-3xl font-bold mb-4 leading-tight">
                                    Quitting for<br/>
                                    <span className={textAccent}>the planet</span>
                                </h3>

                                <div className="space-y-4 mb-6">
                                    <div className={`p-4 rounded-lg ${currentData.theme === 'adult' ? 'bg-green-50' : 'bg-white/5'}`}>
                                        <div className="flex justify-between items-center">
                                            <span className="text-2xl">üå≤</span>
                                            <span className={`text-2xl font-bold ${textAccent}`}>{(parseInt(envStats.trees) * yearsQuit)} trees</span>
                                        </div>
                                        <p className="text-xs opacity-70 mt-1">saved over {yearsQuit} {yearsQuit === 1 ? 'year' : 'years'}</p>
                                    </div>

                                    <div className={`p-4 rounded-lg ${currentData.theme === 'adult' ? 'bg-blue-50' : 'bg-white/5'}`}>
                                        <div className="flex justify-between items-center">
                                            <span className="text-2xl">üíß</span>
                                            <span className={`text-2xl font-bold ${textAccent}`}>{(parseFloat(envStats.water) * yearsQuit).toFixed(0)} gal</span>
                                        </div>
                                        <p className="text-xs opacity-70 mt-1">water conserved</p>
                                    </div>

                                    <div className={`p-4 rounded-lg ${currentData.theme === 'adult' ? 'bg-purple-50' : 'bg-white/5'}`}>
                                        <div className="flex justify-between items-center">
                                            <span className="text-2xl">üóëÔ∏è</span>
                                            <span className={`text-2xl font-bold ${textAccent}`}>{(parseFloat(envStats.waste) * yearsQuit).toFixed(1)} lbs</span>
                                        </div>
                                        <p className="text-xs opacity-70 mt-1">waste prevented</p>
                                    </div>
                                </div>
                            </div>

                            <div className={`p-4 rounded-xl text-center ${currentData.theme === 'teen' ? 'bg-green-500/20' : currentData.theme === 'adult' ? 'bg-green-100' : 'bg-amber-500/20'}`}>
                                <p className={`text-sm font-bold ${textAccent}`}>
                                    Making an impact that matters üå±
                                </p>
                            </div>
                            
                            <div className="share-overlay absolute inset-0 bg-black/60 backdrop-blur-sm rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                                <button 
                                    onClick={handleShare}
                                    className="bg-white text-black px-6 py-3 rounded-full font-bold transform translate-y-4 group-hover:translate-y-0 transition-transform flex items-center gap-2 hover:bg-gray-100"
                                >
                                    <IconShare className="w-4 h-4" />
                                    Share as Image
                                </button>
                            </div>
                        </div>
                    );
                }
            };

            return (
                <div className={`min-h-screen transition-colors duration-700 ${currentData.theme === 'adult' ? 'bg-slate-50 text-slate-900' : currentData.theme === 'teen' ? 'bg-gray-900 text-gray-100' : 'bg-slate-900 text-slate-200'}`}>
                    
                    {/* Navigation / Header */}
                    <nav className="p-6 max-w-5xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
                        <div className="flex items-center gap-2">
                            <div className={`p-2 rounded-lg ${currentData.theme === 'teen' ? 'bg-green-500 text-black' : currentData.theme === 'adult' ? 'bg-blue-600 text-white' : 'bg-amber-400 text-black'}`}>
                                <IconDollar className="w-6 h-6" />
                            </div>
                            <span className="text-2xl font-bold brand-font tracking-tight">Quit<span className={textAccent}>&</span>Win</span>
                        </div>
                        
                        {/* Age Selector */}
                        <div className={`flex rounded-full p-1 ${currentData.theme === 'adult' ? 'bg-slate-200' : 'bg-white/10'}`}>
                            {Object.keys(DATA).map((age) => (
                                <button
                                    key={age}
                                    onClick={() => setAgeGroup(age)}
                                    className={`px-4 py-2 rounded-full text-sm font-semibold transition-all duration-300 ${ageGroup === age ? 'bg-white text-black shadow-lg' : 'text-gray-500 hover:text-gray-400'}`}
                                >
                                    {age}
                                </button>
                            ))}
                        </div>
                    </nav>

                    {/* Hero Section */}
                    <header className="max-w-4xl mx-auto text-center mt-12 px-4">
                        <span className={`inline-block py-1 px-3 rounded-full text-xs font-bold uppercase tracking-wider mb-4 border ${currentData.theme === 'teen' ? 'border-green-500/30 text-green-400' : currentData.theme === 'adult' ? 'border-blue-500/30 text-blue-600' : 'border-amber-500/30 text-amber-400'}`}>
                            {currentData.label}
                        </span>
                        <h1 className="text-5xl md:text-7xl font-bold mb-6 leading-tight">
                            Your habit costs <br/>
                            <span className={textAccent}>more than you think.</span>
                        </h1>
                        <p className="text-xl opacity-80 max-w-2xl mx-auto mb-10">
                            {currentData.tagline}
                        </p>

                        {/* Dimension Tabs - NEW */}
                        <div className="flex justify-center gap-3 mb-16">
                            {DIMENSION_TABS.map((tab) => {
                                const Icon = tab.icon;
                                return (
                                    <button
                                        key={tab.id}
                                        onClick={() => setDimension(tab.id)}
                                        className={`flex items-center gap-2 px-6 py-3 rounded-xl border-2 font-medium transition-all ${dimension === tab.id ? `${btnClass} border-transparent shadow-lg transform scale-105` : `border-gray-700 bg-transparent hover:border-gray-500 opacity-60`}`}
                                    >
                                        <Icon className="w-5 h-5" />
                                        {tab.label}
                                    </button>
                                );
                            })}
                        </div>
                    </header>

                    {/* Main Grid */}
                    <main className="max-w-6xl mx-auto px-4 grid grid-cols-1 lg:grid-cols-2 gap-12 pb-12">
                        
                        {/* Left: Dimension-specific content */}
                        {renderDimensionContent()}

                        {/* Right: The Postcard Preview */}
                        <div className="flex flex-col items-center">
                            <h2 className="text-2xl font-bold mb-6 flex items-center gap-3">
                                <IconShare className={textAccent} />
                                Your Reality Check
                            </h2>

                            {renderPostcard()}
                            
                            <p className="mt-6 text-sm opacity-50 text-center">
                                Hover card to share as image. <br/>Based on avg data in US (2025).
                            </p>
                        </div>
                    </main>

                    {/* CTA Section */}
                    <section className="max-w-4xl mx-auto px-4 mb-20">
                        <div className={`p-8 md:p-12 rounded-3xl text-center border transition-colors duration-500 ${currentData.theme === 'adult' ? 'bg-blue-50 border-blue-100' : 'bg-white/5 border-white/10'}`}>
                            <div className="flex justify-center mb-6">
                                <img 
                                    src="https://kicform.org/hs-fs/hubfs/kic%20logo2.png?width=118&height=40&name=kic%20logo2.png" 
                                    alt="Kick It California Logo" 
                                    className="h-20 object-contain"
                                />
                            </div>
                            <h2 className="text-3xl md:text-4xl font-bold mb-4">
                                Ready to make this real?
                            </h2>
                            <p className="text-lg opacity-80 mb-8 max-w-xl mx-auto">
                                You've done the math. Now take the first step. Kick It California provides free, personalized support to help you quit for good.
                            </p>
                            <a 
                                href="https://kicform.org/kick-it-2" 
                                target="_blank"
                                className={`inline-flex items-center gap-3 px-8 py-4 rounded-xl text-lg font-bold transition-transform hover:scale-105 ${btnClass}`}
                            >
                                Kick It Now
                                <IconArrowRight className="w-5 h-5" />
                            </a>
                        </div>
                    </section>

                    {/* Footer */}
                    <footer className={`py-12 text-center border-t ${currentData.theme === 'adult' ? 'border-gray-200' : 'border-gray-800'}`}>
                        <p className="opacity-40 text-sm">
                            Kick It California is a free program of UC San Diego.<br/>
                            Disclaimer: Estimates only. Prices and data vary by state.
                        </p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
